.carousel-cell {
  width: 100%;
}
.flickity-enabled {
  position: relative;
  &:focus {
    outline: 0;
  }
  &.is-draggable {
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    .flickity-viewport {
      cursor: move;
      cursor: -webkit-grab;
      cursor: grab;
      &.is-pointer-down {
        cursor: -webkit-grabbing;
        cursor: grabbing;
      }
    }
  }
}
.flickity-viewport {
  overflow: hidden;
  position: relative;
  height: 100%;
}
.flickity-slider {
  position: absolute;
  width: 100%;
  height: 100%;
}
.flickity-prev-next-button {
  width: var(--button-size, 40px);
  height: var(--button-size, 40px);
  border-radius: 50%;
  background-color: #fff;
  position: absolute;
  border: none;
  top: 0;
  bottom: 0;
  margin: auto 0;
  outline: none !important;
  transition: all 0.3s ease;
  box-shadow: 0 3px 15px -3px rgba(#000, 0.35);

  &:before {
    @include icon("\f178");
    @extend %inline-flex-center;
    @include absolute(0, 0, 0, 0);
    margin: auto;
    background-repeat: no-repeat;
    background-position: center center;
  }

  &.previous {
    left: 0.375rem;
    &:before {
      transform: scale(-1, 1);
    }
  }
  &.next {
    right: 0.375rem;
    background-size: 14px;
  }
  .flickity-button-icon {
    @include absolute(0, 0, 0, 0);
    margin: auto;
    width: var(--button-font-size, 14px);
    fill: var(--button-color);
    display: none;
  }
  &:hover {
    cursor: pointer;
    svg {
      fill: var(--button-color-hover, #fff);
    }
  }
  &:disabled {
    opacity: 0;
    cursor: not-allowed;
    pointer-events: none;
  }
}
.flickity-rtl {
  .flickity-prev-next-button {
    &.previous {
      left: auto;
      right: 0.5rem;
    }
    &.next {
      right: auto;
      left: 0.5rem;
    }
  }
  .flickity-page-dots {
    direction: rtl;
  }
}
.flickity-page-dots {
  position: absolute;
  width: 100%;
  bottom: 10px;
  padding: 0;
  margin: 0;
  list-style: none;
  text-align: center;
  line-height: 1;
  .dot {
    display: inline-block;
    width: var(--dot-size, 8px);
    height: var(--dot-size, 8px);
    margin: 0 4px;
    background: var(--dot-bg, #000);
    border-radius: 50%;
    opacity: 0.25;
    cursor: pointer;
    &.is-selected {
      opacity: 1;
    }
    &:only-child {
      display: none;
    }
  }
}
@include media-breakpoint-up(md) {
  .flickity-button {
    &.previous {
      left: 10px;
    }
    &.next {
      right: 10px;
    }
  }
}

// Home slider
.home-slider {
  --tt-lg: 2rem;
  &-o {
    position: relative;
  }
  .flickity-viewport {
    z-index: 0;
  }
  .flickity-slider {
    transform: none !important;
  }
  .carousel-cell {
    width: 100%;
    overflow: hidden;
    left: 0 !important;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  }
  .img-slide {
    @extend %bg-image;
    padding-bottom: var(--slide-height, 440px);
    img {
      @extend %absolute-all;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: all 350ms ease 0.2s;
      transform: scale(1);
    }
  }
  .container.d-flex {
    align-items: flex-start;
    padding-top: 48px;
    ~ .img-slide {
      &::before {
        content: "";
        @include absolute(0, 0, 0, 0);
        pointer-events: none;
        background: rgba(0, 0, 0, 0.4);
        z-index: 1;
      }
    }
  }
  .text-slider {
    width: 100%;
    max-width: var(--text-max-width, 480px);
    position: relative;
  }
  .text-center {
    justify-content: center;
    .tt-lg {
      &::after {
        margin-left: auto;
        margin-right: auto;
      }
    }
  }
  .text-end {
    justify-content: flex-end;
    .tt-lg {
      &::after {
        margin-left: auto;
      }
    }
  }
  .tt-lg {
    margin: 0;
    font-weight: 600;
    color: #fff;
    font-family: $f-primary;
    position: relative;
  }
  .desc {
    font-size: var(--desc-font-size, 0.9375rem);
    @include ellips(3);
    color: #fff;
    margin-top: 0.5rem;
  }
  .button {
    --bs-btn-bg: #ff8f2b;
    --bs-btn-color: #fff;
    --bs-btn-border-color: #ff8f2b;
    --bs-btn-hover-bg: #003870;
    --bs-btn-hover-color: #fff;
    --bs-btn-hover-border-color: #003870;
    margin-top: 1.25rem;
  }
  // animations slider
  .tt-lg {
    transition: transform 1s ease 0.2s, opacity 0.75s ease 0.2s;
    opacity: 0;
  }
  .desc {
    transition: transform 1.3s ease 0.2s, opacity 0.75s ease 0.3s;
    opacity: 0;
  }
  .button {
    transition: transform 1.5s ease 0.2s, opacity 0.75s ease 0.4s,
      color 0.3s ease 0s, background 0.3s ease 0s;
    opacity: 0;
  }
  .tt-lg {
    transform: translateY(50px);
  }
  .desc {
    transform: translateY(80px);
  }
  .button {
    transform: translateY(100px);
  }
  .is-selected {
    opacity: 1;
    .img-slide {
      img {
        animation: scaleImg 1.15s linear forwards;
      }
    }
    .tt-lg,
    .desc,
    .button,
    .tt {
      transform: none;
      opacity: 1;
    }
  }
  &-control {
    display: flex;
    align-items: center;
    justify-content: end;
    --bs-gutter-x: 4rem;
    &__wrapper {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 24px;
      pointer-events: none;
    }
    &__navigation {
      display: flex;
      align-items: center;
      gap: 12px;
      pointer-events: all;
      .btn-slider {
        color: #fff;
        width: 28px;
        height: 28px;
        border-radius: 2px;
        transition: all 350ms ease 0s;
        font-size: 17px;
        @extend %inline-flex-center;
        &:hover {
          background: $primary;
          color: #fff;
        }
      }
    }
    &__pagination {
      width: 150px;
      background: rgba(#fff, 0.25);
      margin-right: 1rem;
      .progress {
        height: 2px;
        width: 0;
        background: #fff;
      }
    }
  }
}
@keyframes scaleImg {
  0% {
    transform: scale3d(1.1, 1.1, 1.05);
  }
  50% {
    transform: scale3d(1.05, 1.05, 1.025);
  }
  100% {
    transform: scale3d(1, 1, 1);
  }
}
@include media-breakpoint-up(md) {
  .home-slider {
    --slide-height: calc(680 / 1024 * 100%);
    --tt-lg: 2rem;
    --desc-font-size: 1.075rem;
    --layer-margin: 1.125rem;
    --text-max-width: 70%;
    .container.d-flex {
      align-items: center;
      padding-top: 0;
    }
    .text-slider {
      &::after {
        max-width: 250px;
        height: 350px;
      }
    }
    .button {
      margin-top: 1.5rem;
    }
  }
}
@include media-breakpoint-up(lg) {
  .home-slider {
    --slide-height: calc(720 / 1280 * 100%);
    --tt-lg: calc(2.5rem + 0.4vw);
    --desc-font-size: 1.125rem;
    --text-max-width: 62.5%;
    .container.d-flex {
      align-items: center;
      padding-top: 0px;
    }
    .flickity-button {
      --button-size: 50px;
      &.previous {
        left: 2.25%;
      }
      &.next {
        right: 2.25%;
      }
    }
    .text-slider {
      &::after {
        max-width: 300px;
        height: 400px;
      }
    }
    &:hover .flickity-button {
      opacity: 1;
    }
  }
}
@include media-breakpoint-up(xl) {
  .home-slider {
    --slide-height: calc(720 / 1440 * 100%);
    --text-max-width: 55%;
  }
}
@include media-breakpoint-up(xxl) {
  .home-slider {
    --slide-height: calc(720 / 1920 * 100%);
    --text-max-width: 50%;
  }
}
@include media-breakpoint-up(xxxl) {
  .home-slider {
    .flickity-button {
      &.previous {
        left: 6%;
      }
      &.next {
        right: 6%;
      }
    }
  }
}
.carousel-partners {
  .carousel-cell {
    width: calc(70% - 1rem);
    margin-right: 1rem;
    @include media-breakpoint-up(sm) {
      width: calc(51% - 1.5rem);
      margin-right: 1.5rem;
    }
    @include media-breakpoint-up(md) {
      width: calc(34% - 1.5rem);
    }
    @include media-breakpoint-up(lg) {
      width: calc(34% - 2rem);
      margin-right: 2rem;
    }
    @include media-breakpoint-up(xl) {
      width: calc(26% - 2rem);
      margin-right: 2rem;
    }
    @include media-breakpoint-up(xxl) {
      width: calc(20.7% - 2rem);
      margin-right: 2rem;
    }
  }
  .thumb-res {
    --thumb-res-wide: 35%;
    margin-bottom: 0;
    filter: brightness(0) invert(1);
    transition: all 350ms ease 0s;
    &:hover {
      filter: none;
      img {
        transform: scale(0.9);
      }
    }
  }
}

.carousel-c2md3 {
  .carousel-cell {
    margin-right: 1rem;
    width: calc(80% - 1rem);
    @include media-breakpoint-up(sm) {
      width: calc(60% - 1rem);
    }
    @include media-breakpoint-up(md) {
      width: calc(50% - 1rem);
    }
    @include media-breakpoint-up(lg) {
      width: calc(33.3% - 1rem);
    }
  }
}
.carousel-services {
  .flickity-button {
    background-color: $primary;
    border: 1px solid $primary;
    color: #fff;
    opacity: 0;
    box-shadow: none;
    &:hover {
      background-color: $secondary;
      border-color: $secondary;
      color: #fff;
    }
    &:disabled {
      opacity: 0;
    }
  }
  .block {
    margin-bottom: 12px;
  }
  .flickity-page-dots {
    bottom: 0rem;
    position: relative;
    margin-top: 1rem;
    .dot {
      --dot-bg: #ff8f2b;
      opacity: 0.3;
      transition: all 350ms ease;
      &.is-selected {
        opacity: 1;
      }
    }
  }
  @include media-breakpoint-up(lg) {
    &:hover {
      .flickity-button {
        opacity: 1;
        &:disabled {
          opacity: 0;
        }
      }
    }
  }
}

.pane-slide {
  .carousel-cell {
    margin-right: 1rem;
  }
  .flickity-button {
    top: -0.5rem;
    --button-size: 36px;
    font-size: 0.9375rem;
  }
  .flickity-page-dots {
    bottom: 0rem;
    left: 0;
    position: relative;
    margin-top: 0.25rem;
    .dot {
      --dot-size: 7px;
      --dot-bg: #FF8F2B;
      opacity: 0.3;
      transition: all 250ms ease;
      &.is-selected {
        opacity: 1;
      }
    }
  }
}
